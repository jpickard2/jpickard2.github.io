---
title: LED cube
date: 2026-01-07 22:00:00
categories: [Projects]
tags: [electronics] #use lowercase, comma separated
#file has to be named yyyy-mm-dd-<post name>.md in order to show up
---
# A 3 dimensional visualizer using programmable RGB LEDs

## Background

The motivation behind this project comes from almost ten years ago when I first met my wife. She introduced me to an expanded version of tic tac toe, where each square in the usual 3x3 game board each contains its own 3x3 mini game-board. When a player marks a box, its position within the "sub-board" determines which "sub-board" the other player is restricted to for their move. It adds a really fun level of strategy and we had many hours of enjoyment playing it. I wondered if it could be extended even further to 3 dimensions. In theory it should work -- the challenge was designing a game board to actually play it on (or doing it virtually on a computer). On the way to trying to bring this idea to reality, I learned a tremendous amount about Arduino and compatible microcontrollers, C++, the extensive FastLED library for controlling LEDs, and LED technology in general.

## The challenge

The primary difficulty that becomes clear when designing a 3 dimensional gameboard is viewability. Our board will be a 9x9x9 cube, consisting of 729 different positions. When a spot is taken by a player it needs to be clearly "marked" and observable from different angles around the cube. While the players can be expected to move around to get a better view to some extent, there will always be cases where a spot is internal to the entire cube, and will thus have 4 or more other positions in the line of sight. This is a significant problem that I still haven't completely overcome.

## Initial designs

As alluded to, I decided to use LEDs as the position markers. An LED is at the center of each position cube, and can turn one of two colors when a player takes the spot (instead of an X or O). This could be done by having two single-color LEDs at each positiion, or one dual-color LED, or just going for full RGB. I went with the full RGB option. At that time, I could only find them as strips, which really doomed this design from the beginning. The strip was completely opaque and presented far too much of a blockage to anything behind it. In addition, the LEDs only had at best a 180 degree viewing angle, pointing upwards -- nothing was visible from below. I spent a lot of time experimenting with ways to surround and diffuse the glow from each LED with different materials. Eventually I used small plastic prize balls around each and every LED. It produced a nice effect, but didn't come close to achieving the initial goal. I had a lot of fun designing different types of visualizations using FastLED, but clearly I had to find an alternative to the LED strips if I was going to accomplish the original goal.

## Version 2

The original version sat on a shelf, and I kept checking around for new RGB LED products that might work better than the strips. One day I saw that programmable LEDs were now available in the classic "hat shaped" from factor. This looked liked it could improve two problems: the LED viewing angles, and the line of sight blocking problem. I ordered a few to test. They looked quite promising: extremely bright and visible even from below. So if I was going to try this again, the next big question was how to go about connecting them together into a 3 dimensional grid structure. The strips were convenient, but still a pain to solder. For those, I had alternating positive and ground vertical rails, and each strip was soldered to those at its ends. Then the data line was connected from one strip to its neighbor in a snake pattern, and up to the next level at the end. Actually, instead of going straight up, I ran it all the way back to start in the same XY position each time. This gave a big advantage in the programming stage, where changing Z position was as simple as adding 81 to the LED number. More on this later. The power connection at the end of each strip was also its only physical support, which did result in significant drooping in the middle, but it worked. So while the strip had 3 lines running along it (positive, ground and data) these new individual LEDs have 4 leads: positive, ground, data in, data out. I bent them outwards to form a plus shape, and found that I could solder them directly to their neighbors, after a little trim. So far so good. Then, I needed additional wires running between each row of LEDs for shared power supplies. If I changed the orientation of each row, the positives would point together and same for the negatives, so two rows could share a power line. These I collected at the edges and ran to the four corners of each layer, to connect to main vertical rails. I designed and 3D printed an assembly jig which I could fit all the LEDs for a layer (81) into at once, bend the leads, trim, and solder. Make sure each one is in the correct orientation! Only had a few pop when I plugged them in. The PLA held up nicely for the entire assembly, despite a little melting. 

## Version 3

Initially I really wanted this to be modular and able to be taken apart at any time so a bad LED could be replaced, if needed. I became interested in acrylic (plexiglass) and was making a rigid box to contain everything, as well as having each layer on its own tray, which could be pulled out for easy access, and plugged in to the power and data connections using some plugs. This was going OK, but ultimately all the internal reflections from the acrylic were too much. Thus, I went to a more minimal design, where the structure would be mostly supported by its own wiring connections. I still wanted it to be modular and easy to disassamble, in case an LED needed replacing. I found some interesting connectors that could be used in the four corners to stack layers up and have vertical power and data continuity. I still found the need for some additional structural support, and decided to add 3D printed columns in the corners. I had hoped to make these fit together like LEGO pieces, but this proved impractical so I eventually glued them together. I did a significant amount of experimentation trying to get them as translucent as possible. Perhaps unexpectedly, thinner layers are not easier to see through.

![CD4051](/myfiles/CD4051.jpg){: width="200"}

## Additional considerations

A well known issue with strings of programmable LEDs (note that these are still arrayed in a linear fashion, just snaked around) is voltage drop at the end of the line. I had main power coming in at the bottom and going up two vertical rails which supplied each layer in turn. There was indeed reduced voltage at the top layer, so I added a line going directly to the top layer as well. Otherwise power connections were pretty evenly spread across each layer. For this new version, I changed the LED arrangement from the previous versions (each layer oriented the same way) in order to make the physical data line connections simpler. Now each layer is rotated 180 degrees. It's a trade off, simplifying the physical layout but making the programming stage more complex.
I tested each layer on its own after soldering, giving it a good twisting and bopping to reveal any cold joints or bad connections. Also, this is where a backwards LED would be quickly revealed (always wear your safety glasses!). Then I would plug it on top of the growing cube for testing in place, and finally glue in the corner blocks.

## Programming

This project has two distinct sides, the hardware and software. Once I had finished soldering 729 LEDs along with supporting wires and structual supports, I could figure out how to make it do cool things. I primarily used the extensive FastLED library, which has an excellent community of users making all kinds of awesome projects. I hit memory limits on my Arduino UNO and upgraded to the mega is;ofajf, and later experimented with the even higher-powered Teensy XX, as well as trying its built in LED library, XXXXX. I will eventually return to the origin of this project, the 3D tic tac toe game, but for now I have just gotten lost in making different visualizations and exploring how one can display different objects on a 3D grid. Even with all that work, it's still only a 9x9 "screen" -- not exactly high resolution. There are some much more advanced and impressive examples out there:



## Future plans and ideas




## Parts list

![Bat receiver v1.0 schematic](/myfiles/bat_receiver_v1.0_schematic.png)

|Designator|Footprint|Quantity|Designation|Notes|
|----------|---------|---|-----------|---------|
|batt/power1|SolderWire-0.5sqmm_1x04_P4.6mm_D0.9mm_OD2.1mm|1|batt/power switch|
|C1,C3|C_Disc_D3.0mm_W1.6mm_P2.50mm|2|1n|
|C12|CP_Radial_D5.0mm_P2.50mm|1|10u|Polarized electrolytic|
|C2,C4,C5,C7,C8,C10,C11|C_Disc_D10.0mm_W2.5mm_P5.00mm|7|10n|
|C6|C_Disc_D3.0mm_W1.6mm_P2.50mm|1|470p|LO timing|
|C9,C13|C_Disc_D10.0mm_W2.5mm_P5.00mm|2|100n|
|D1|LED_D5.0mm|1|Red 2V Vf, 1mA target|
|freq1|SolderWire-0.5sqmm_1x02_P4.6mm_D0.9mm_OD2.1mm|1|to 20k linear pot|
|mic1|SolderWire-0.5sqmm_1x03_P4.6mm_D0.9mm_OD2.1mm|1|to mic board|
|out1|SolderWire-0.5sqmm_1x03_P4.6mm_D0.9mm_OD2.1mm|1|to stereo jack|
|Q1,Q2|TO-92_Inline|2|2N3904|
|R1|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|1|47k|
|R10|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|1|3k6 (using 3k57 because I have)|
|R11|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|1|3k|
|R2,R13|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|2|10k|
|R3|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|1|4k7|
|R4|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|1|1k|
|R5,R6|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|2|22k|
|R7,R8|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|2|470|
|R9,R12|R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal|2|1k5|
|U1|DIP-16_W7.62mm_Socket|1|CD4051|
|U2|DIP-14_W7.62mm_Socket|1|CD4047|
|U3|DIP-8_W7.62mm_Socket|1|LM386|
|volume1|SolderWire-0.5sqmm_1x03_P4.6mm_D0.9mm_OD2.1mm|1|to 10k linear pot|


